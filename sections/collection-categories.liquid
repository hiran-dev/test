{% comment %}
  Collection Categories via Metafields
  Namespace: custom.categories
  Type: Collection (multiple)
{% endcomment %}

{% if collection.metafields.custom.categories != blank %}
<section class="collection-categories">
  <div class="wrapper--full">
    <!--<h2 class="collection-categories__title">
      {{ section.settings.heading }}
    </h2>-->

    <div class="collection-categories__grid">
      {% for cat in collection.metafields.custom.categories.value %}
        <a href="{{ cat.url }}" class="collection-category-card">
          
          <div class="collection-category-image">
            {% if cat.featured_image %}
              <img
                src="{{ cat.featured_image | img_url: '400x' }}"
                alt="{{ cat.title }}"
                loading="lazy"
                width="100"
                height="100"
              >
            {% else %}
              {{ 'collection-1' | placeholder_svg_tag }}
            {% endif %}
          </div>

          <div class="collection-category-title">
            {{ cat.title }}
          </div>

        </a>
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}

<style>
.collection-categories {
  margin: 0;
}
.collection-category-title {
    padding: 10px;
    font-size: 14px;
    text-transform: uppercase;
    text-align: center;
    max-width: 160px;
}
.collection-categories__grid {
    white-space: nowrap;
    overflow-x: auto;
}
.collection-category-image {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    overflow: hidden;
    display: block;
    margin: auto;
}
.collection-category-card {
    text-decoration: none;
    overflow: hidden;
    transition: all 0.3s ease;
    display: inline-block;
    vertical-align: top;
}

.collection-category-card:hover {
  transform: translateY(-4px);
}

.collection-category-image img {
  width: 100px;
  height: 100px;
  object-fit: cover;
}

/* Responsive */
@media(max-width: 1024px){
  .collection-categories__grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media(max-width: 768px){
  .collection-categories__grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media(max-width: 480px){
  .collection-categories__grid {
    grid-template-columns: repeat(1, 1fr);
  }
}
</style>

{% schema %}
{
  "name": "Collection Categories",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Shop by Category"
    }
  ],
  "presets": [
    {
      "name": "Collection Categories (Metafields)"
    }
  ]
}
{% endschema %}
